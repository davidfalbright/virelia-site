<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>V.I.R.E.L.I.A. — Virtual Intelligence with Responsible Ethics, Logic, and Independent Alignment</title>
  <meta name="description" content="Virelia is a global AI ethics framework providing ethical decision support for real-world dilemmas.">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* Hide sections if body has the class 'guest' */
    body.guest #navContactLink,
    body.guest #footContactLink,
    body.guest #navLogoutLink, /* Hide logout link in header */
    body.guest #manageEmailsLink, /* Hide Manage Emails link */
    body.guest #navManageEmailsLink { /* Hide footer manage emails link */
      display: none !important;
    }
  </style>

  <!-- Auth guard + session bootstrap -->
  <script>
  (function () {
    function readToken() {
      try {
        const ls = localStorage.getItem('session_token');
        if (ls) return ls;
      } catch {}
      const m = document.cookie.match(/(?:^|;\s*)session_token=([^;]+)/);
      return m ? decodeURIComponent(m[1]) : null;
    }

    function parseJwtPayload(jwt) {
      const parts = (jwt || '').split('.');
      if (parts.length < 2) return null;
      const b64 = parts[1].replace(/-/g, '+').replace(/_/g, '/');
      try {
        const json = atob(b64);
        return JSON.parse(decodeURIComponent(
          json.split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join('')
        ));
      } catch {
        try { return JSON.parse(atob(b64)); } catch { return null; }
      }
    }

    const token = readToken();
    const payload = parseJwtPayload(token) || {};
    const isGuest = payload.role === 'guest' || payload.email === 'guest';

    if (isGuest) {
      // If the user is a guest, add the 'guest' class to body
      document.body.classList.add('guest');
    } else {
      // If the user is not a guest, ensure the 'guest' class is removed
      document.body.classList.remove('guest');
    }
  })();
  </script>
</head>
<body>

  <header class="topbar">
    <div class="container row">
      <div class="brand">
        <div class="logo">
          <img src="https://raw.githubusercontent.com/davidfalbright/virelia-site/main/images/Bronze_Accord.png" alt="Virelia Logo">
        </div>
        <div class="brand-text">
          <strong>V.I.R.E.L.I.A.</strong>
          <span>Virtual Intelligence with Responsible Ethics, Logic, and Independent Alignment</span>
        </div>
      </div>

      <nav class="nav">
        <a href="about_us.html">About Us</a>
        <a href="#how">How it works</a>
        <a href="impact.html">Impact & Benefits</a>
        <a href="differentiation.html">Market Differentiation</a>
        <a href="implementation.html">Implementation</a>
        <a href="solutions.html">Delivery Models</a>
        <a href="#contact" id="navContactLink">Contact</a>
        <a href="/delete-email.html" id="manageEmailsLink">Manage emails</a>
        <a href="#" id="navLogoutLink" style="margin-left:.75rem;">Log out</a>
      </nav>
    </div>
  </header>

  <!-- Hero and other sections here -->

  <footer class="footer">
    <div class="container row between">
      <div>© <span id="year"></span> Virelia. All rights reserved.</div>
      <div class="foot-links">
        <a href="about_us.html">About Us</a>
        <a href="#how">How it works</a>
        <a href="#contact" id="footContactLink">Contact</a>
        <a href="impact.html">Impact & Benefits</a>
      </div>
    </div>
  </footer>

  <!-- Optional: small script to wire up "Log out" and keep the year fresh -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    document.getElementById('logoutLink')?.addEventListener('click', function(e){
      e.preventDefault();
      (window.__clearSessionEverywhere__ || function(){})();
      location.replace('/');
    });
  </script>

  <script src="script_landingPage.js" defer></script>
</body>
</html>
